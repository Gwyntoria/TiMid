# TBJ_Controller_MCU

## 2021.10.22 更新到 W201~W226（其中 216，218，224 没有更新）

1. 增加了欢乐马戏团的检测；
2. 推流的码流改成 2M

## 2022.01.08 更新到 W201~W230（其中 212，213，214，216 没有更新）

1. 增加了推币机当前画面类型返回给 app 的接口
2. 修改了采集卡截图的逻辑，用线程方式去掉缓存数据

## 2022.11.09

1. 增加叠叠乐和小玛丽的检测返回给服务器；
2. 上分投币改为线程模式，间隔修改，解决投 3 币无法正常出币的问题；
3. 增加一个 GPIO 控制的模式，目前只有一台机器用 GPIO 模式（226）

## 2022.11.25

1. 增加欢乐马戏团的故障值检测；

## 2023.04.13 更新到 W232 W234

1. 增加总分的检测；
2. 在光眼检测到得分累计 50 以上时，如果总分没变，判定为机器死机

## 2023.07.18 更新到 201 ～ 248（除去 203，219，220，222，229，233，237）

1. 光眼检测部分另起一个进程
2. 故障补偿规则修改

## 2023.08.03 更新到 204 ～ 248（除去 219，220，222，229，233）

1. 修改与海思推流设备的通讯方式

## 2023.10.12 更新到 120~128, 204 ～ 248（除去 121, 122, 123, 219, 225, 228, 233 为 sunrise，234，248）

1. 增加 restart Camera 的通讯控制；
2. 有用户上机时，socket 断开后短时间重连上可以让用户继续上机；

## 2023.11.03

1. WaController 重启时发送当前服务器给海思推流端（0 为测试服，1 为正式服）
